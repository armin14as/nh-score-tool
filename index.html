<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>NH SCORE – Ultra-Optimized UX</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<style>
  *, *::before, *::after {
    box-sizing: border-box;
  }
  
  :root {
    --primary-gradient: linear-gradient(135deg, #7877c6, #533483);
    --secondary-gradient: linear-gradient(135deg, #00c6ff, #0072ff);
    --success-color: #10b981;
    --warning-color: #f59e0b;
    --error-color: #ef4444;
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.85);
    --glass-bg: rgba(255, 255, 255, 0.05);
    --glass-border: rgba(255, 255, 255, 0.1);
    --shadow-primary: 0 20px 60px rgba(120, 119, 198, 0.3);
    --shadow-hover: 0 25px 70px rgba(120, 119, 198, 0.4);
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
    color: var(--text-primary);
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    scroll-behavior: smooth;
    line-height: 1.6;
  }

  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
      radial-gradient(circle at 25% 25%, rgba(120, 119, 198, 0.15) 0%, transparent 40%),
      radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.06) 0%, transparent 40%);
    z-index: -1;
    pointer-events: none;
  }

  /* Enhanced Progress Bar */
  .progress-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 6px;
    background: rgba(0, 0, 0, 0.3);
    z-index: 1000;
    backdrop-filter: blur(10px);
  }
  
  .progress-bar {
    height: 100%;
    width: 0%;
    background: var(--secondary-gradient);
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }
  
  .progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 20px;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8));
    animation: progressShine 2s ease-in-out infinite;
  }
  
  @keyframes progressShine {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
  }

  /* Mini Navigation */
  .mini-nav {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
    z-index: 999;
    padding: 8px 12px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 25px;
    backdrop-filter: blur(20px);
  }
  
  .nav-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .nav-dot.completed {
    background: var(--success-color);
    box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
  }
  
  .nav-dot.active {
    background: var(--secondary-gradient);
    transform: scale(1.3);
    box-shadow: 0 0 15px rgba(0, 198, 255, 0.6);
  }
  
  .nav-dot:hover {
    transform: scale(1.2);
  }

  /* Floating Action Buttons */
  .fab-container {
    position: fixed;
    bottom: 30px;
    right: 30px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    z-index: 998;
  }
  
  .fab {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--primary-gradient);
    border: none;
    color: white;
    font-size: 20px;
    cursor: pointer;
    box-shadow: var(--shadow-primary);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .fab:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: var(--shadow-hover);
  }
  
  .fab.save-fab {
    background: var(--success-color);
  }
  
  .fab.reset-fab {
    background: var(--error-color);
  }
  
  .fab.export-fab {
    background: linear-gradient(135deg, #667eea, #764ba2);
  }

  header {
    text-align: center;
    padding: 6rem 1rem 2rem;
    position: relative;
  }
  
  .main-title {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 900;
    background: linear-gradient(135deg, #ffffff, #7877c6, #00ffff);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
    animation: titleGradient 4s ease-in-out infinite;
  }
  
  @keyframes titleGradient {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  .subtitle {
    color: var(--text-secondary);
    font-size: clamp(1rem, 2.5vw, 1.25rem);
    max-width: 600px;
    margin: 0 auto;
  }

  /* Hero Stats */
  .hero-stats {
    display: flex;
    justify-content: center;
    gap: 3rem;
    margin-top: 2rem;
    flex-wrap: wrap;
  }
  
  .stat-item {
    text-align: center;
    background: var(--glass-bg);
    padding: 1.5rem 2rem;
    border-radius: 20px;
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(15px);
    transition: all 0.3s ease;
  }
  
  .stat-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-primary);
  }
  
  .stat-number {
    font-size: 2.5rem;
    font-weight: 900;
    background: var(--secondary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
  }
  
  .stat-label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  /* Enhanced Total Score Box */
  .total-score-box {
    text-align: center;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(20px);
    border-radius: 2rem;
    padding: 2.5rem;
    margin-bottom: 3rem;
    box-shadow: var(--shadow-primary);
    position: sticky;
    top: 80px;
    z-index: 100;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .total-score-box:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-hover);
  }
  
  .score-header {
    margin-bottom: 1.5rem;
  }
  
  .score-header h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
  }
  
  .score-date {
    color: var(--text-secondary);
    font-size: 0.9rem;
  }
  
  .total-score-ring {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 0 auto 1rem;
  }
  
  .total-score-ring canvas {
    position: absolute;
    top: 0;
    left: 0;
  }
  
  .score-value {
    position: absolute;
    top: 45%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2.8rem;
    font-weight: 900;
    background: var(--secondary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    line-height: 1;
  }
  
  .score-percentage {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-secondary);
  }
  
  .score-label {
    font-size: 1rem;
    color: var(--text-secondary);
    margin-bottom: 1rem;
  }
  
  .score-interpretation {
    background: rgba(120, 119, 198, 0.15);
    padding: 1rem 1.5rem;
    border-radius: 15px;
    margin: 1.5rem 0;
    font-weight: 600;
    font-size: 1rem;
    border: 1px solid rgba(120, 119, 198, 0.3);
  }
  
  .score-breakdown {
    display: flex;
    justify-content: space-around;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--glass-border);
  }
  
  .breakdown-item {
    text-align: center;
  }
  
  .breakdown-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--success-color);
  }
  
  .breakdown-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 0.5rem;
  }

  /* Enhanced Categories */
  .category {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 2rem;
    padding: 2.5rem;
    margin-bottom: 2.5rem;
    backdrop-filter: blur(20px);
    box-shadow: var(--shadow-primary);
    position: relative;
    overflow: hidden;
    animation: fadeInUp 0.6s ease forwards;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .category:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-hover);
  }
  
  .category::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--primary-gradient);
    opacity: 0.8;
    transition: all 0.3s ease;
  }
  
  .category.completed::before {
    background: var(--success-color);
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
  }
  
  .category.active::before {
    background: var(--secondary-gradient);
    box-shadow: 0 0 15px rgba(0, 198, 255, 0.5);
    animation: pulse 2s ease-in-out infinite;
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 1; }
  }

  .category-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
  }
  
  .category h2 {
    font-size: 1.5rem;
    margin: 0;
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 700;
  }
  
  .category-score {
    background: rgba(120, 119, 198, 0.2);
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    font-weight: 700;
    color: #00e6e6;
    font-size: 1rem;
    min-width: 100px;
    text-align: center;
    border: 1px solid rgba(0, 230, 230, 0.3);
    transition: all 0.3s ease;
  }
  
  .category-progress {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    margin-top: 1rem;
    overflow: hidden;
  }
  
  .category-progress-fill {
    height: 100%;
    background: var(--secondary-gradient);
    border-radius: 3px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    width: 0%;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(40px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Enhanced Questions */
  .question {
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 15px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid transparent;
  }
  
  .question:hover {
    background: rgba(255, 255, 255, 0.06);
    transform: translateX(5px);
  }
  
  .question.answered {
    border-color: var(--success-color);
    background: rgba(16, 185, 129, 0.05);
  }
  
  .question label {
    display: block;
    margin-bottom: 1rem;
    font-weight: 600;
    font-size: 1.1rem;
    color: var(--text-primary);
  }

  /* Ultra-Enhanced Radio Buttons */
  .radio-group {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 1rem;
  }
  
  .radio-group input[type="radio"] {
    display: none;
  }
  
  .radio-group label {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background: rgba(120, 119, 198, 0.15);
    color: var(--text-primary);
    border-radius: 30px;
    padding: 1.2rem 1.8rem;
    cursor: pointer;
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.1);
    border: 2px solid transparent;
    position: relative;
    overflow: hidden;
    min-height: 60px;
  }
  
  .radio-group label::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .radio-group label:hover::before {
    left: 100%;
  }
  
  .radio-group label:hover {
    background: linear-gradient(135deg, #a292f1, #5a3f99);
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 12px 30px rgba(162, 146, 241, 0.4);
  }
  
  .radio-group input[type="radio"]:checked + span {
    display: inline-block;
    background: var(--primary-gradient);
    box-shadow: 0 0 25px rgba(124, 94, 221, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.1);
    color: white;
    padding: 1.2rem 1.8rem;
    border-radius: 30px;
    font-weight: 800;
    font-size: 1.1rem;
    letter-spacing: 0.5px;
    animation: selectPulse 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid rgba(255, 255, 255, 0.3);
  }
  
  /* Different colors for different values */
  .radio-group label:nth-child(1):has(input:checked) span { /* Nein */
    background: var(--error-color) !important;
    box-shadow: 0 0 25px rgba(239, 68, 68, 0.6) !important;
  }
  
  .radio-group label:nth-child(2):has(input:checked) span { /* Teilweise */
    background: var(--warning-color) !important;
    box-shadow: 0 0 25px rgba(245, 158, 11, 0.6) !important;
  }
  
  .radio-group label:nth-child(3):has(input:checked) span { /* Ja */
    background: var(--success-color) !important;
    box-shadow: 0 0 25px rgba(16, 185, 129, 0.6) !important;
  }
  
  @keyframes selectPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.08); }
    100% { transform: scale(1); }
  }

  /* Enhanced Success Messages */
  .success-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    padding: 2.5rem 3.5rem;
    border-radius: 25px;
    box-shadow: 0 25px 80px rgba(16, 185, 129, 0.4);
    z-index: 1001;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    text-align: center;
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }
  
  .success-message h3 {
    margin: 0 0 1rem 0;
    font-size: 1.8rem;
    font-weight: 800;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
  }
  
  .success-message h3::before {
    content: "";
    width: 32px;
    height: 32px;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 24 24'%3E%3Cpath d='M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'/%3E%3C/svg%3E") no-repeat center;
    background-size: contain;
  }
  
  .success-message.show {
    opacity: 1;
    visibility: visible;
    animation: successBounce 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  @keyframes successBounce {
    0% { transform: translate(-50%, -50%) scale(0.7) rotate(-5deg); }
    50% { transform: translate(-50%, -50%) scale(1.1) rotate(2deg); }
    100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
  }

  /* Notification */
  .notification {
    position: fixed;
    top: 100px;
    right: 30px;
    padding: 1rem 1.5rem;
    border-radius: 15px;
    color: white;
    font-weight: 600;
    z-index: 1002;
    opacity: 0;
    transform: translateX(100%);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .notification.show {
    opacity: 1;
    transform: translateX(0);
  }
  
  .notification.success {
    background: var(--success-color);
    box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
  }
  
  .notification.error {
    background: var(--error-color);
    box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .container {
      padding: 1rem;
    }
    
    .hero-stats {
      gap: 1.5rem;
    }
    
    .stat-item {
      padding: 1rem 1.5rem;
    }
    
    .stat-number {
      font-size: 2rem;
    }
    
    .mini-nav {
      top: 10px;
      padding: 6px 10px;
    }
    
    .nav-dot {
      width: 10px;
      height: 10px;
    }
    
    .total-score-box {
      padding: 2rem;
      position: relative;
      top: unset;
    }
    
    .total-score-ring {
      width: 160px;
      height: 160px;
    }
    
    .score-value {
      font-size: 2.2rem;
    }
    
    .score-percentage {
      font-size: 1rem;
    }
    
    .category {
      padding: 2rem;
    }
    
    .category-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 1rem;
    }
    
    .radio-group {
      grid-template-columns: 1fr;
      gap: 0.8rem;
    }
    
    .fab-container {
      bottom: 20px;
      right: 20px;
    }
    
    .fab {
      width: 48px;
      height: 48px;
      font-size: 18px;
    }
    
    .score-breakdown {
      flex-direction: column;
      gap: 1rem;
    }
    
    .breakdown-item {
      padding: 0.5rem;
    }
  }

  .radio-group label:focus-within {
    outline: 2px solid var(--secondary-gradient);
    outline-offset: 2px;
  }
  
  .fab:focus {
    outline: 2px solid var(--text-primary);
    outline-offset: 2px;
  }
</style>
</head>
<body>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  
  <nav class="mini-nav" id="miniNav"></nav>
  
  <div class="fab-container">
    <button class="fab export-fab" onclick="exportToPDF()" title="Als PDF exportieren">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14,2 14,8 20,8"/>
        <line x1="16" y1="13" x2="8" y2="13"/>
        <line x1="16" y1="17" x2="8" y2="17"/>
        <polyline points="10,9 9,9 8,9"/>
      </svg>
    </button>
    <button class="fab save-fab" onclick="saveProgress()" title="Fortschritt speichern">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
        <polyline points="17,21 17,13 7,13 7,21"/>
        <polyline points="7,3 7,8 15,8"/>
      </svg>
    </button>
    <button class="fab reset-fab" onclick="resetAll()" title="Alles zurücksetzen">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="1 4 1 10 7 10"/>
        <polyline points="23 20 23 14 17 14"/>
        <path d="m20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4-4.64 4.36A9 9 0 0 1 3.51 15"/>
      </svg>
    </button>
    <button class="fab" onclick="scrollToTop()" title="Nach oben">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="19" x2="12" y2="5"/>
        <polyline points="5,12 12,5 19,12"/>
      </svg>
    </button>
  </div>

  <header>
    <h1 class="main-title">NH Score</h1>
    <p class="subtitle">Wissenschaftlich fundiertes 100-Punkte-System für umfassende Gesundheit & Leistungsfähigkeit</p>
    <div class="hero-stats">
      <div class="stat-item">
        <div class="stat-number">5</div>
        <div class="stat-label">Kategorien</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">50</div>
        <div class="stat-label">Fragen</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">100</div>
        <div class="stat-label">Max. Punkte</div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="total-score-box">
      <div class="score-header">
        <h3>Ihr aktueller Gesundheitsscore</h3>
        <div class="score-date" id="scoreDate"></div>
      </div>
      <div class="total-score-ring">
        <canvas id="scoreRing" width="200" height="200"></canvas>
        <div class="score-value" id="totalScore">0</div>
        <div class="score-percentage" id="scorePercentage">0%</div>
      </div>
      <div class="score-label">von 100 möglichen Punkten</div>
      <div class="score-interpretation" id="scoreInterpretation">
        Starten Sie mit der ersten Kategorie
      </div>
      <div class="score-breakdown">
      <div class="score-breakdown">
        <div class="breakdown-item">
          <div class="breakdown-value" id="completedQuestions">0</div>
          <div class="breakdown-label">Beantwortet</div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-value" id="completedCategories">0</div>
          <div class="breakdown-label">Abgeschlossen</div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-value" id="averageScore">0%</div>
          <div class="breakdown-label">Durchschnitt</div>
        </div>
      </div>
    </section>
    
    <div id="categories"></div>
  </main>

  <div class="success-message" id="successMessage">
    <h3>Kategorie erfolgreich abgeschlossen!</h3>
    <p>Großartig! Du machst echte Fortschritte.</p>
  </div>
  
  <div class="notification" id="notification"></div>

  <script>
    // Simple working version
    const ctx = document.getElementById('scoreRing').getContext('2d');
    const scoreChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Erreichte Punkte', 'Verbleibende Punkte'],
        datasets: [{
          data: [0, 100],
          backgroundColor: ['rgba(0, 198, 255, 0.8)', 'rgba(255, 255, 255, 0.1)'],
          borderColor: ['rgba(0, 198, 255, 1)', 'rgba(255, 255, 255, 0.2)'],
          borderWidth: 2,
        }]
      },
      options: {
        cutout: '75%',
        plugins: { legend: { display: false } },
        animation: { animateRotate: true, duration: 1500 }
      }
    });

    const categories = [
      {
        title: 'Schlaf & Erholung',
        questions: [
          'Schläfst du mindestens 7–8 Stunden pro Nacht?',
          'Hast du einen regelmäßigen Schlaf-Wach-Rhythmus?',
          'Wachst du ohne Wecker erholt auf?',
          'Schläfst du ohne Unterbrechungen durch?',
          'Vermeidest du Blaulicht 2h vor dem Schlafengehen?',
          'Schläfst du in einem völlig dunklen Raum?',
          'Wachst du erfrischt und energiegeladen auf?',
          'Vermeidest du späte und schwere Mahlzeiten?',
          'Kommst du ohne Schlafmittel oder Alkohol aus?',
          'Fühlst du dich tagsüber wach und konzentriert?'
        ]
      },
      {
        title: 'Ernährung & Supplements',
        questions: [
          'Verzichtest du weitgehend auf raffinierten Zucker?',
          'Isst du täglich mindestens 5 Portionen Gemüse/Obst?',
          'Trinkst du täglich 2-3 Liter reines Wasser?',
          'Verwendest du Supplements gezielt nach Bedarf?',
          'Hast du regelmäßige und bewusste Essenszeiten?',
          'Isst du ballaststoffreich und nährstoffdicht?',
          'Vermeidest du hochverarbeitete Fertigprodukte?',
          'Meidest du künstliche Zusätze und Konservierungsstoffe?',
          'Hast du eine gesunde Verdauung ohne Probleme?',
          'Verzichtest du auf künstliche Süßstoffe?'
        ]
      },
      {
        title: 'Training & Bewegung',
        questions: [
          'Bewegst du dich täglich mindestens 30 Minuten?',
          'Trainierst du 3-4x pro Woche strukturiert?',
          'Schaffst du problemlos 10.000 Schritte täglich?',
          'Bist du schmerzfrei und beweglich?',
          'Hast du klare sportliche Ziele und Motivation?',
          'Folgst du einem durchdachten Trainingsplan?',
          'Trainierst du regelmäßig deine Ausdauer?',
          'Trainierst du systematisch deine Kraft?',
          'Bist du flexibel und hast gute Mobilität?',
          'Kannst du problemlos länger laufen/gehen?'
        ]
      },
      {
        title: 'Mindset & Stressmanagement',
        questions: [
          'Fühlst du dich selten überwältigt oder gestresst?',
          'Praktizierst du regelmäßig Meditation oder Achtsamkeit?',
          'Umgibst du dich mit positiven Einflüssen?',
          'Hast du klare Lebensziele und Prioritäten?',
          'Lebst du nach deinen persönlichen Werten?',
          'Hast du eine grundsätzlich optimistische Einstellung?',
          'Vermeidest du Multitasking und Ablenkungen?',
          'Hast du starke soziale Verbindungen und Unterstützung?',
          'Kannst du nach der Arbeit wirklich abschalten?',
          'Fühlst du dich meistens glücklich und erfüllt?'
        ]
      },
      {
        title: 'Lifestyle & Umwelt',
        questions: [
          'Rauchst du nicht und meidest Passivrauchen?',
          'Trinkst du maximal 1-2 Gläser Alkohol pro Woche?',
          'Vermeidest du Plastik bei Lebensmitteln und Getränken?',
          'Hast du Zugang zu sauberem, gefiltertem Wasser?',
          'Meidest du schädliche Chemikalien im Alltag?',
          'Verwendest du natürliche Körperpflege ohne Toxine?',
          'Schläfst du in einem schadstofffreien Umfeld?',
          'Bekommst du täglich natürliches Tageslicht?',
          'Verbringst du regelmäßig Zeit in der Natur?',
          'Führst du einen bewusst nachhaltigen Lebensstil?'
        ]
      }
    ];

    const categoriesEl = document.getElementById('categories');
    const answers = [];
    let currentActiveCategory = 0;

    // Initialize
    categories.forEach((cat, catIdx) => {
      answers[catIdx] = Array(cat.questions.length).fill(null);
    });

    function createMiniNav() {
      const miniNav = document.getElementById('miniNav');
      categories.forEach((cat, idx) => {
        const dot = document.createElement('div');
        dot.className = 'nav-dot';
        dot.title = cat.title;
        dot.onclick = () => scrollToCategory(idx);
        miniNav.appendChild(dot);
      });
    }

    function createCategories() {
      categories.forEach((cat, catIdx) => {
        const catEl = document.createElement('section');
        catEl.className = 'category';
        catEl.id = `category-${catIdx}`;
        
        const headerEl = document.createElement('div');
        headerEl.className = 'category-header';
        
        const title = document.createElement('h2');
        title.textContent = cat.title;
        
        const scoreEl = document.createElement('div');
        scoreEl.className = 'category-score';
        scoreEl.id = `score-${catIdx}`;
        scoreEl.textContent = '0 / 20';
        
        headerEl.appendChild(title);
        headerEl.appendChild(scoreEl);
        catEl.appendChild(headerEl);
        
        const progressContainer = document.createElement('div');
        progressContainer.className = 'category-progress';
        const progressFill = document.createElement('div');
        progressFill.className = 'category-progress-fill';
        progressFill.id = `progress-${catIdx}`;
        progressContainer.appendChild(progressFill);
        catEl.appendChild(progressContainer);

        cat.questions.forEach((q, qIdx) => {
          const qEl = document.createElement('div');
          qEl.className = 'question';
          qEl.id = `question-${catIdx}-${qIdx}`;
          
          const label = document.createElement('label');
          label.textContent = `${qIdx + 1}. ${q}`;
          qEl.appendChild(label);
          
          const group = document.createElement('div');
          group.className = 'radio-group';

          ['Nein', 'Teilweise', 'Ja'].forEach((text, val) => {
            const id = `cat${catIdx}_q${qIdx}_v${val}`;
            const radio = document.createElement('input');
            radio.type = 'radio';
            radio.name = `cat${catIdx}_q${qIdx}`;
            radio.value = val;
            radio.id = id;
            radio.onchange = () => handleAnswerChange(catIdx, qIdx, parseInt(radio.value));
            
            const span = document.createElement('span');
            span.textContent = text;
            
            const lbl = document.createElement('label');
            lbl.htmlFor = id;
            lbl.appendChild(radio);
            lbl.appendChild(span);
            group.appendChild(lbl);
          });
          
          qEl.appendChild(group);
          catEl.appendChild(qEl);
        });

        categoriesEl.appendChild(catEl);
      });
    }

    function handleAnswerChange(catIdx, qIdx, value) {
      answers[catIdx][qIdx] = value;
      const questionEl = document.getElementById(`question-${catIdx}-${qIdx}`);
      questionEl.classList.add('answered');
      updateScores();
      updateMiniNav();
      checkCategoryCompletion(catIdx);
    }

    function updateScores() {
      let total = 0;
      let answeredQuestions = 0;
      const totalQuestions = categories.reduce((sum, cat) => sum + cat.questions.length, 0);
      let completedCats = 0;
      
      answers.forEach((group, i) => {
        const sum = group.reduce((a, b) => a + (b !== null ? b : 0), 0);
        const answered = group.filter(a => a !== null).length;
        const percentage = answered > 0 ? (answered / group.length * 100) : 0;
        
        total += sum;
        answeredQuestions += answered;
        
        if (answered === group.length) completedCats++;
        
        document.getElementById(`score-${i}`).textContent = `${sum} / 20`;
        document.getElementById(`progress-${i}`).style.width = percentage + '%';
      });
      
      const overallPercentage = totalQuestions > 0 ? Math.round((total / (totalQuestions * 2)) * 100) : 0;
      
      document.getElementById('totalScore').textContent = total;
      document.getElementById('scorePercentage').textContent = overallPercentage + '%';
      document.getElementById('completedQuestions').textContent = `${answeredQuestions}/${totalQuestions}`;
      document.getElementById('completedCategories').textContent = `${completedCats}/5`;
      document.getElementById('averageScore').textContent = overallPercentage + '%';
      
      updateScoreInterpretation(total, overallPercentage, answeredQuestions, totalQuestions);
      document.getElementById('scoreDate').textContent = `Stand: ${new Date().toLocaleDateString('de-DE')}`;
      
      scoreChart.data.datasets[0].data = [total, 100 - total];
      scoreChart.update();
      
      const progress = (answeredQuestions / totalQuestions) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
      
      let chartColor = 'rgba(239, 68, 68, 0.8)';
      if (overallPercentage >= 40) chartColor = 'rgba(245, 158, 11, 0.8)';
      if (overallPercentage >= 70) chartColor = 'rgba(16, 185, 129, 0.8)';
      
      scoreChart.data.datasets[0].backgroundColor[0] = chartColor;
      scoreChart.update();
    }

    function updateScoreInterpretation(total, percentage, answered, totalQuestions) {
      const interpretationEl = document.getElementById('scoreInterpretation');
      
      if (answered === 0) {
        interpretationEl.textContent = 'Beginnen Sie mit der Bewertung Ihrer Gesundheit';
        interpretationEl.style.background = 'rgba(120, 119, 198, 0.15)';
        return;
      }
      
      if (answered < totalQuestions) {
        interpretationEl.textContent = `Bewertung läuft... ${Math.round((answered/totalQuestions)*100)}% abgeschlossen`;
        interpretationEl.style.background = 'rgba(245, 158, 11, 0.15)';
        return;
      }
      
      let interpretation = '';
      let bgColor = '';
      
      if (percentage >= 85) {
        interpretation = 'Ausgezeichnet! Ihr Gesundheitsstatus ist vorbildlich.';
        bgColor = 'rgba(16, 185, 129, 0.15)';
      } else if (percentage >= 70) {
        interpretation = 'Sehr gut! Sie haben eine solide Gesundheitsbasis.';
        bgColor = 'rgba(16, 185, 129, 0.15)';
      } else if (percentage >= 55) {
        interpretation = 'Gut! Es gibt noch Optimierungspotential.';
        bgColor = 'rgba(245, 158, 11, 0.15)';
      } else if (percentage >= 40) {
        interpretation = 'Verbesserungswürdig. Fokus auf Schlüsselbereiche empfohlen.';
        bgColor = 'rgba(245, 158, 11, 0.15)';
      } else {
        interpretation = 'Handlungsbedarf! Professionelle Beratung empfohlen.';
        bgColor = 'rgba(239, 68, 68, 0.15)';
      }
      
      interpretationEl.textContent = interpretation;
      interpretationEl.style.background = bgColor;
    }

    function updateMiniNav() {
      const dots = document.querySelectorAll('.nav-dot');
      answers.forEach((group, i) => {
        const answered = group.filter(a => a !== null).length;
        const isCompleted = answered === group.length;
        const isActive = i === currentActiveCategory;
        
        dots[i].classList.toggle('completed', isCompleted);
        dots[i].classList.toggle('active', isActive && !isCompleted);
      });
    }

    function checkCategoryCompletion(catIdx) {
      const category = answers[catIdx];
      const isComplete = category.every(answer => answer !== null);
      const categoryEl = document.getElementById(`category-${catIdx}`);
      
      if (isComplete) {
        categoryEl.classList.add('completed');
        showSuccessMessage();
        updateActiveCategory();
        
        const nextCategory = findNextIncompleteCategory(catIdx);
        if (nextCategory !== -1) {
          setTimeout(() => scrollToCategory(nextCategory), 2000);
        }
      }
    }

    function findNextIncompleteCategory(currentIdx) {
      for (let i = currentIdx + 1; i < answers.length; i++) {
        if (!answers[i].every(answer => answer !== null)) {
          return i;
        }
      }
      return -1;
    }

    function updateActiveCategory() {
      document.querySelectorAll('.category').forEach(cat => cat.classList.remove('active'));
      const nextIncomplete = findNextIncompleteCategory(-1);
      if (nextIncomplete !== -1) {
        currentActiveCategory = nextIncomplete;
        document.getElementById(`category-${nextIncomplete}`).classList.add('active');
      }
    }

    function showSuccessMessage() {
      const msg = document.getElementById('successMessage');
      msg.classList.add('show');
      setTimeout(() => msg.classList.remove('show'), 3000);
    }

    function scrollToCategory(index) {
      currentActiveCategory = index;
      updateMiniNav();
      document.getElementById(`category-${index}`).scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function saveProgress() {
      const data = { answers: answers, timestamp: Date.now(), version: '2.0' };
      const blob = new Blob([JSON.stringify(data)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `nh-score-${new Date().toISOString().split('T')[0]}.json`;
      a.click();
      URL.revokeObjectURL(url);
      showNotification('Fortschritt gespeichert!', 'success');
    }

    function resetAll() {
      if (confirm('Alle Antworten zurücksetzen?')) {
        answers.forEach(group => group.fill(null));
        document.querySelectorAll('input[type="radio"]').forEach(radio => radio.checked = false);
        document.querySelectorAll('.question').forEach(q => q.classList.remove('answered'));
        document.querySelectorAll('.category').forEach(cat => cat.classList.remove('completed', 'active'));
        currentActiveCategory = 0;
        document.getElementById('category-0').classList.add('active');
        updateScores();
        updateMiniNav();
        showNotification('Zurückgesetzt!', 'success');
      }
    }

    function exportToPDF() {
      const total = answers.reduce((sum, group) => sum + group.reduce((a, b) => a + (b !== null ? b : 0), 0), 0);
      const percentage = Math.round((total / 100) * 100);
      const date = new Date().toLocaleDateString('de-DE');
      
      const printWindow = window.open('', '_blank');
      printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head><title>NH Score Auswertung</title>
        <style>body{font-family:Arial,sans-serif;margin:40px;color:#333}.header{text-align:center;margin-bottom:40px;border-bottom:2px solid #7877c6;padding-bottom:20px}</style>
        </head>
        <body>
        <div class="header"><h1>NH Score Auswertung</h1><p>Datum: ${date}</p><h2>Ergebnis: ${total}/100 Punkte (${percentage}%)</h2></div>
        </body></html>
      `);
      printWindow.document.close();
      setTimeout(() => printWindow.print(), 500);
    }

    function showNotification(message, type) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification ${type}`;
      notification.classList.add('show');
      setTimeout(() => notification.classList.remove('show'), 3000);
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      createMiniNav();
      createCategories();
      updateActiveCategory();
      updateMiniNav();
      setTimeout(() => scrollToCategory(0), 1000);
    });
  </script>
</body>
</html>item">
          <div class="breakdown-
